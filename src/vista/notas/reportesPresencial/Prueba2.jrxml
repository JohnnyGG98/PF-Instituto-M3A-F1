<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="1520" pageHeight="960" columnWidth="1520" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="806"/>
	<property name="ireport.y" value="186"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Lushito\\Documents\\GitHub\\PF-Instituto-M3A-F1\\src\\vista\\notas\\reportesPresencial\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="id_docente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="prd_lectivo_nombre" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="curso_nombre" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="materia_nombre" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	"Alumnos".id_alumno,
	p_alu.persona_identificacion,
	p_alu.persona_primer_apellido || ' ' || p_alu.persona_segundo_apellido  ||' ' ||
	p_alu.persona_primer_nombre || ' ' || p_alu.persona_segundo_nombre AS "ALUMNO",
	"AlumnoCurso".almn_curso_nota_final,
	"Materias".materia_nombre,
	"Cursos".curso_nombre,
	"Carreras".carrera_nombre,
	"PeriodoLectivo".prd_lectivo_nombre,
	"Personas".persona_primer_nombre || ' ' || "Personas".persona_segundo_nombre  ||' '||
	"Personas".persona_primer_apellido || ' ' || "Personas".persona_segundo_apellido AS "PROFESOR"
	
FROM
	"AlumnoCurso"
	INNER JOIN "Cursos" ON "AlumnoCurso".id_curso = "Cursos".id_curso
	INNER JOIN "Jornadas" ON "Cursos".id_jornada = "Jornadas".id_jornada
	INNER JOIN "Materias" ON "Cursos".id_materia = "Materias".id_materia
	INNER JOIN "PeriodoLectivo" ON "Cursos".id_prd_lectivo = "PeriodoLectivo".id_prd_lectivo
	INNER JOIN "Alumnos" ON "AlumnoCurso".id_alumno = "Alumnos".id_alumno
	INNER JOIN "Personas" p_alu ON "Alumnos".id_persona = p_alu.id_persona
	INNER JOIN "Docentes" ON "public"."Cursos".id_docente = "public"."Docentes".id_docente
	INNER JOIN "Carreras" ON "public"."Carreras".id_carrera = "public"."Materias".id_carrera
	INNER JOIN "Personas" ON "public"."Personas".id_persona = "public"."Docentes".id_persona
WHERE
	"PeriodoLectivo".prd_lectivo_estado = true 
	AND "Cursos".id_docente = $P{id_docente}
	AND "PeriodoLectivo".prd_lectivo_nombre = $P{prd_lectivo_nombre}
	AND "Cursos".curso_nombre= $P{curso_nombre}
	AND "public"."Materias".materia_nombre = $P{materia_nombre}
ORDER BY
	p_alu.persona_primer_apellido ASC;]]>
	</queryString>
	<field name="id_alumno" class="java.lang.Integer"/>
	<field name="persona_identificacion" class="java.lang.String"/>
	<field name="ALUMNO" class="java.lang.String"/>
	<field name="almn_curso_nota_final" class="java.math.BigDecimal"/>
	<field name="materia_nombre" class="java.lang.String"/>
	<field name="curso_nombre" class="java.lang.String"/>
	<field name="carrera_nombre" class="java.lang.String"/>
	<field name="prd_lectivo_nombre" class="java.lang.String"/>
	<field name="PROFESOR" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="198" splitType="Stretch">
			<staticText>
				<reportElement x="195" y="112" width="54" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Carrera:]]></text>
			</staticText>
			<staticText>
				<reportElement x="195" y="80" width="97" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Período Lectivo:]]></text>
			</staticText>
			<staticText>
				<reportElement x="195" y="147" width="41" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Ciclo:]]></text>
			</staticText>
			<staticText>
				<reportElement x="673" y="55" width="199" height="20"/>
				<textElement textAlignment="Center">
					<font size="12"/>
				</textElement>
				<text><![CDATA[REGISTRO DE CALIFICACIONES]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="1520" height="45" forecolor="#006699"/>
				<textElement textAlignment="Center">
					<font size="32" isBold="true" isItalic="false" isUnderline="false"/>
				</textElement>
				<text><![CDATA[INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY]]></text>
			</staticText>
			<staticText>
				<reportElement x="1043" y="112" width="72" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Asignatura:]]></text>
			</staticText>
			<staticText>
				<reportElement x="1043" y="80" width="56" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Docente:]]></text>
			</staticText>
			<line>
				<reportElement x="1" y="187" width="1520" height="1"/>
			</line>
			<textField>
				<reportElement x="1159" y="82" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PROFESOR}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1159" y="112" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{materia_nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="317" y="80" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{prd_lectivo_nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="319" y="112" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{carrera_nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="292" y="147" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{curso_nombre}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="31" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch">
			<staticText>
				<reportElement x="32" y="1" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[id_alumno]]></text>
			</staticText>
			<staticText>
				<reportElement x="184" y="1" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[ALUMNO]]></text>
			</staticText>
			<staticText>
				<reportElement x="352" y="1" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[persona_identificacion]]></text>
			</staticText>
			<staticText>
				<reportElement x="500" y="1" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[almn_curso_nota_final]]></text>
			</staticText>
			<staticText>
				<reportElement x="733" y="1" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[NOTA 1]]></text>
			</staticText>
			<staticText>
				<reportElement x="931" y="5" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[Examen Interciclo]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch">
			<textField>
				<reportElement x="32" y="16" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{id_alumno}.toString()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="184" y="21" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ALUMNO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="340" y="21" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{persona_identificacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="510" y="21" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{id_alumno}.toString()]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement x="683" y="9" width="200" height="100"/>
				<subreportParameter name="id_alumno">
					<subreportParameterExpression><![CDATA[$F{id_alumno}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="id_docente">
					<subreportParameterExpression><![CDATA[$P{id_docente}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="prd_lectivo_nombre">
					<subreportParameterExpression><![CDATA[$P{prd_lectivo_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="curso_nombre">
					<subreportParameterExpression><![CDATA[$P{curso_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="materia_nombre">
					<subreportParameterExpression><![CDATA[$P{materia_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="id_tipo_nota">
					<subreportParameterExpression><![CDATA[4]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "SubReportePrueba2.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement x="942" y="9" width="200" height="100"/>
				<subreportParameter name="id_alumno">
					<subreportParameterExpression><![CDATA[$F{id_alumno}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="id_docente">
					<subreportParameterExpression><![CDATA[$P{id_docente}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="prd_lectivo_nombre">
					<subreportParameterExpression><![CDATA[$P{prd_lectivo_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="curso_nombre">
					<subreportParameterExpression><![CDATA[$P{curso_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="materia_nombre">
					<subreportParameterExpression><![CDATA[$P{materia_nombre}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="id_tipo_nota">
					<subreportParameterExpression><![CDATA[7]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "SubReporteExamenInterciclo.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
