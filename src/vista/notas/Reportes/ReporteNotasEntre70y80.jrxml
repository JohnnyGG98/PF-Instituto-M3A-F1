<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="1560" pageHeight="1000" columnWidth="1520" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.000000000000005"/>
	<property name="ireport.x" value="150"/>
	<property name="ireport.y" value="0"/>
	<parameter name="id_docente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="prd_lectivo_nombre" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="curso_ciclo" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="curso_paralelo" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="nombre_jornada" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="materia_nombre" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	"ViewAlumnoCurso".id_alumno,
	"ViewAlumnoCurso".persona_identificacion,
	"ViewAlumnoCurso".persona_primer_apellido || ' ' || "ViewAlumnoCurso".persona_segundo_apellido AS "APELLIDOS",
	"ViewAlumnoCurso".persona_primer_nombre || ' ' || "ViewAlumnoCurso".persona_segundo_nombre AS "NOMBRES",
	ROUND( "ViewAlumnoCurso".almn_curso_nota_final, 0 ) AS "NOTA FINAL",
	"ViewAlumnoCurso".materia_nombre,
	"ViewAlumnoCurso".nombre_jornada,
	"ViewAlumnoCurso".curso_ciclo,
	"ViewAlumnoCurso".curso_paralelo,
	"ViewAlumnoCurso".carrera_nombre,
	"ViewAlumnoCurso".prd_lectivo_nombre,
	"ViewAlumnoCurso".pri_ape_docente || ' ' || "ViewAlumnoCurso".seg_ape_docente || ' ' ||
	"ViewAlumnoCurso".pri_nom_docente || ' ' || "ViewAlumnoCurso".seg_nom_docente  AS 	"DOCENTE",
	"ViewAlumnoCurso".coor_prim_apellido || ' ' || "ViewAlumnoCurso".coor_segn_apellido || ' ' ||
	"ViewAlumnoCurso".coor_prim_nombre || ' ' || "ViewAlumnoCurso".coor_segn_nombre AS "COORDINADOR",
	M.malla_almn_num_matricula
	
FROM
	"ViewAlumnoCurso" INNER JOIN "AlumnosCarrera" ON "ViewAlumnoCurso".id_alumno = "AlumnosCarrera".id_alumno
 INNER JOIN "MallaAlumno" M on "AlumnosCarrera".id_almn_carrera = M.id_almn_carrera
WHERE
	"public"."ViewAlumnoCurso".id_docente = $P{id_docente}
	AND "public"."ViewAlumnoCurso".prd_lectivo_nombre = $P{prd_lectivo_nombre} 
	AND "public"."ViewAlumnoCurso".curso_ciclo = $P{curso_ciclo}
	AND "public"."ViewAlumnoCurso".curso_paralelo = $P{curso_paralelo}
	AND "public"."ViewAlumnoCurso".nombre_jornada = $P{nombre_jornada}
	AND "public"."ViewAlumnoCurso".materia_nombre = $P{materia_nombre}
	AND "public"."ViewAlumnoCurso".almn_curso_nota_final >= 70
	AND "public"."ViewAlumnoCurso".almn_curso_nota_final < 81
	AND M.malla_almn_num_matricula = (SELECT max(a.malla_almn_num_matricula) FROM 
  "MallaAlumno" a where a.id_almn_carrera = M.id_almn_carrera GROUP BY a.id_almn_carrera) 
	
	GROUP BY "ViewAlumnoCurso".id_alumno,
	"ViewAlumnoCurso".persona_identificacion,
	"ViewAlumnoCurso".persona_primer_apellido, "ViewAlumnoCurso".persona_segundo_apellido,
	"ViewAlumnoCurso".persona_primer_nombre, "ViewAlumnoCurso".persona_segundo_nombre,
	ROUND( "ViewAlumnoCurso".almn_curso_nota_final, 0 ),
	"ViewAlumnoCurso".materia_nombre,
	"ViewAlumnoCurso".nombre_jornada,
	"ViewAlumnoCurso".curso_ciclo,
	"ViewAlumnoCurso".curso_paralelo,
	"ViewAlumnoCurso".carrera_nombre,
	"ViewAlumnoCurso".prd_lectivo_nombre,
	"ViewAlumnoCurso".pri_ape_docente, "ViewAlumnoCurso".seg_ape_docente,
	"ViewAlumnoCurso".pri_nom_docente, "ViewAlumnoCurso".seg_nom_docente,
	"ViewAlumnoCurso".coor_prim_apellido, "ViewAlumnoCurso".coor_segn_apellido,
	"ViewAlumnoCurso".coor_prim_nombre, "ViewAlumnoCurso".coor_segn_nombre,
	M.malla_almn_num_matricula
	ORDER BY "ViewAlumnoCurso".persona_primer_apellido]]>
	</queryString>
	<field name="id_alumno" class="java.lang.Integer"/>
	<field name="persona_identificacion" class="java.lang.String"/>
	<field name="APELLIDOS" class="java.lang.String"/>
	<field name="NOMBRES" class="java.lang.String"/>
	<field name="NOTA FINAL" class="java.math.BigDecimal"/>
	<field name="materia_nombre" class="java.lang.String"/>
	<field name="nombre_jornada" class="java.lang.String"/>
	<field name="curso_ciclo" class="java.lang.Integer"/>
	<field name="curso_paralelo" class="java.lang.String"/>
	<field name="carrera_nombre" class="java.lang.String"/>
	<field name="prd_lectivo_nombre" class="java.lang.String"/>
	<field name="DOCENTE" class="java.lang.String"/>
	<field name="COORDINADOR" class="java.lang.String"/>
	<field name="malla_almn_num_matricula" class="java.lang.Integer"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="213" splitType="Stretch">
			<staticText>
				<reportElement x="198" y="158" width="41" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Ciclo:]]></text>
			</staticText>
			<staticText>
				<reportElement x="585" y="61" width="331" height="20"/>
				<textElement textAlignment="Center">
					<font size="12"/>
				</textElement>
				<text><![CDATA[REGISTRO DE CALIFICACIONES ENTRE 70 Y 80]]></text>
			</staticText>
			<staticText>
				<reportElement x="997" y="158" width="56" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Jornada:]]></text>
			</staticText>
			<staticText>
				<reportElement x="198" y="81" width="97" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Período Lectivo:]]></text>
			</staticText>
			<textField>
				<reportElement x="319" y="81" width="223" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{prd_lectivo_nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="258" y="158" width="37" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{curso_ciclo}.toString()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="198" y="123" width="54" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Carrera:]]></text>
			</staticText>
			<staticText>
				<reportElement x="997" y="81" width="56" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Docente:]]></text>
			</staticText>
			<textField>
				<reportElement x="1083" y="158" width="214" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{nombre_jornada}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="395" y="158" width="37" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{curso_paralelo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1083" y="123" width="300" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{materia_nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="319" y="123" width="366" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{carrera_nombre}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="10" width="1520" height="45" forecolor="#006699"/>
				<textElement textAlignment="Center">
					<font size="32" isBold="true" isItalic="false" isUnderline="false"/>
				</textElement>
				<text><![CDATA[INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY]]></text>
			</staticText>
			<staticText>
				<reportElement x="997" y="123" width="72" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Asignatura:]]></text>
			</staticText>
			<staticText>
				<reportElement x="319" y="158" width="52" height="20"/>
				<textElement>
					<font fontName="Times New Roman" size="14"/>
				</textElement>
				<text><![CDATA[Paralelo:]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="206" width="1520" height="1"/>
			</line>
			<image>
				<reportElement x="16" y="55" width="167" height="134"/>
				<imageExpression class="java.lang.String"><![CDATA["vista/notas/Reportes/logo.png"]]></imageExpression>
			</image>
			<textField>
				<reportElement x="1083" y="81" width="300" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOCENTE}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="442" y="0" width="73" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[N°]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="515" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[CÉDULA]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="615" y="0" width="155" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[APELLIDOS]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="770" y="0" width="138" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[NOMBRES]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="908" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[NOTA FINAL]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="1008" y="0" width="75" height="20" forecolor="#FFFFFF" backcolor="#006699"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[N° MATRÍCULA]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="515" y="0" width="100" height="20"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{persona_identificacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="615" y="0" width="155" height="20"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{APELLIDOS}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="770" y="0" width="138" height="20"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{NOMBRES}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement mode="Opaque" x="908" y="0" width="100" height="20" backcolor="#FFCC99"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{NOTA FINAL}.toString()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="442" y="0" width="73" height="20"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{COLUMN_COUNT}-0]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1008" y="0" width="75" height="20"/>
				<box>
					<topPen lineWidth="0.75" lineColor="#000000"/>
					<leftPen lineWidth="0.75" lineColor="#000000"/>
					<bottomPen lineWidth="0.75" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{malla_almn_num_matricula}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="2" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="176" splitType="Stretch">
			<staticText>
				<reportElement x="485" y="146" width="100" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[DOCENTE]]></text>
			</staticText>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="1354" y="156" width="166" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[new java.util.Date().toString()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="953" y="146" width="100" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[COORDINADOR]]></text>
			</staticText>
			<line>
				<reportElement x="414" y="115" width="234" height="1"/>
			</line>
			<line>
				<reportElement x="879" y="114" width="234" height="1"/>
			</line>
			<textField>
				<reportElement x="415" y="126" width="233" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOCENTE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="879" y="126" width="234" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{COORDINADOR}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
